# Search

An implementation of a search component. The `<FluentSearch>` supports two visual appearances, outline and filled, with the control defaulting to the outline appearance.

`<FluentSearch>` wraps the `<fluent-search>` element, a web component implementation of a search element leveraging the Fluent UI design system.

## Examples

### Default

The search box with a label has autocomplete turned off explicitly by using the `AutoComplete` parameter.

<div style="display: flex; flex-direction: column; gap: 1rem;">
    <div>
        Without a label: 
        <input type="search" aria-label="Search" style="padding: 5px 8px; border-radius: 4px; border: 1px solid var(--neutral-stroke-rest);">
    </div>
    <div>
        <label>With a label</label>
        <input type="search" autocomplete="off" style="padding: 5px 8px; border-radius: 4px; border: 1px solid var(--neutral-stroke-rest);">
    </div>
</div>

```razor
<div>
    Without a label: <FluentSearch @bind-Value=value AriaLabel="Search"/>
</div>
<div>
    <FluentSearch @bind-Value=value Label="With a label" AutoComplete="off" />
</div>
@code {
    string? value;
}
```

### Interactive

<input type="search" placeholder="Search for State" style="width: 100%; padding: 5px 8px; border-radius: 4px; border: 1px solid var(--neutral-stroke-rest);">
<br>
<div style="border: 1px solid var(--neutral-stroke-rest); border-radius: 4px; margin-top: 0.5rem; padding: 4px;">
    <div>no results</div>
</div>
<p>You searched for:</p>

```razor
<FluentSearch @ref=searchTest 
              @bind-Value="@searchValue"
              @bind-Value:after=HandleSearchInput
              Placeholder="Search for State" />
<br />
<FluentListbox aria-label="search results" Items=@searchResults TOption="string" SelectedOptionChanged="@(e => searchValue = (e != defaultResultsText ? e : string.Empty) )"  />

<p>
    You searched for: @searchValue
</p>

@code {
    FluentSearch? searchTest;
    string? searchValue = string.Empty;

    List<string> searchData = new()
    {
        "Alabama", "Alaska", "Arizona", // ... and so on
    };

    List<string> searchResults = defaultResults();

    static string defaultResultsText = "no results";
    static List<string> defaultResults() => new() { defaultResultsText };

    void HandleSearchInput()
    {
        if (string.IsNullOrWhiteSpace(searchValue))
        {
            searchResults = defaultResults();
            searchValue = string.Empty;
        }
        else
        {
            string searchTerm = searchValue.ToLower();
            if (searchTerm.Length > 0)
            {
                var temp = searchData.Where(str => str.ToLower().Contains(searchTerm)).ToList();
                if (temp.Any())
                {
                    searchResults = temp;
                }
            }
        }
    }
}
```

### Immediate (with and without debounce)

<div style="display: flex; flex-direction: column; gap: 10px;">
    <div>
        <label>Immediate Delay</label>
        <input type="number" value="0" style="padding: 5px 8px; border-radius: 4px; border: 1px solid var(--neutral-stroke-rest);">
    </div>
    <input type="search" placeholder="Search for name" style="width: 100%; padding: 5px 8px; border-radius: 4px; border: 1px solid var(--neutral-stroke-rest);">
    <p>You searched for:</p>
    <div style="border: 1px solid var(--neutral-stroke-rest); border-radius: 4px; padding: 4px;">
        <div>No results</div>
    </div>
</div>

```razor
<FluentStack Orientation="Orientation.Vertical" VerticalGap="10">
    <FluentNumberField @bind-Value="_immediateDelay"
                       TValue="int"
                       Label="Immediate Delay"
                       Placeholder="Delay"
                       Min="0"
                       Max="2000"
                       Step="100" />

    <FluentSearch @bind-Value="_searchValue"
                  @bind-Value:after="OnSearch"
                  Immediate="true"
                  ImmediateDelay="_immediateDelay"
                  Placeholder="Search for name" />

    <p>You searched for: @_searchValue</p>
    <FluentListbox aria-label="search results"
                   TOption="string"
                   Items=@_searchResults                   
                   SelectedOptionChanged="@(e => _searchValue = (e != _defaultResultsText ? e : string.Empty))" />
</FluentStack>

@code {
    private string? _searchValue;
    private int _immediateDelay;
    private const string _defaultResultsText = "No results";
    private List<string> _searchResults = DefaultResults();

    private static List<string> DefaultResults() => new() { _defaultResultsText };

    private void OnSearch()
    {
        if (!string.IsNullOrWhiteSpace(_searchValue))
        {
            var results = searchData
                .Where(str => str.Contains(_searchValue, StringComparison.OrdinalIgnoreCase))
                .ToList();
            _searchResults = results.Any() ? results : DefaultResults();
        }
        else
        {
            _searchResults = DefaultResults();
        }
    }
    
    private List<string> searchData = new() { /* ... data ... */ };
}
```

## Documentation

### FluentSearch Class

Inherits from `FluentInputBase<string?>`.

#### Parameters

| Parameter | Type | Default | Description |
| --- | --- | --- | --- |
| **Appearance** | `FluentInputAppearance` | `Outline` | Gets or sets the visual appearance. |
| **AutoComplete** | `string?` | | Gets or sets whether autocomplete should be 'on' or 'off'. |
| **Immediate** | `bool` | `False` | If true, the `ValueChanged` event fires on the `oninput` event. |
| **ImmediateDelay** | `int` | `0` | Debounce delay in milliseconds before the `ValueChanged` event fires (if `Immediate` is true). |
| **Label** | `string?` | | The text label for the input. |
| **Maxlength** | `int?` | | The maximum number of characters a user can enter. |
| **Minlength** | `int?` | | The minimum number of characters a user can enter. |
| **Pattern** | `string?` | | A regular expression that the value must match to pass validation. |
| **Placeholder** | `string?` | | The short hint displayed in the input before the user enters a value. |
| **Value** | `string?` | | The value of the input. Use with `@bind-Value`. |

#### Methods

| Method | Description |
| --- | --- |
| **FocusAsync()** | Sets focus to the element. |

### Placeholders and autofill

The `Placeholder` parameter is used to set the placeholder text for the input field. The placeholder value affects the autofill suggestion feature in browsers. To prevent autofill suggestions, avoid using common placeholder values like "name", "email", "address", etc. If you need to use these values, disable autofill in your browser settings.