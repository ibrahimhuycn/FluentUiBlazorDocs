# Combobox

As defined by the W3C:

A combobox is an input widget with an associated popup that enables users to select a value for the combobox from a collection of possible values. In some implementations, the popup presents allowed values, while in other implementations, the popup presents suggested values, and users may either select one of the suggestions or type a value. The popup may be a listbox, grid, tree, or dialog. Many implementations also include a third optional element -- a graphical Open button adjacent to the combobox, which indicates availability of the popup. Activating the Open button displays the popup if suggestions are available.

`<FluentCombobox>` wraps the `<fluent-combobox>` element, a web component implementation of a combobox.

Due to the fact that a combobox allows the user to enter a value, it is impossible to return an `OptionValue`.

## Examples

### Default examples

<div style="display: flex; flex-direction: column; gap: 1rem;">
    <div>
        <label>Best song</label>
        <input type="text" placeholder="Make a selection..." style="width: 100%; padding: 5px 8px; border-radius: 4px; border: 1px solid var(--neutral-stroke-rest);">
        <p>Selected hit:</p>
    </div>
    <div>
        <label>Pre-selected option</label>
        <input type="text" value="Nur Sari" style="width: 100%; padding: 5px 8px; border-radius: 4px; border: 1px solid var(--neutral-stroke-rest);">
        <p>Selected name: Nur Sari</p>
    </div>
    <div>
        <label>With Placeholder</label>
        <input type="text" placeholder="Please select a size" style="width: 100%; padding: 5px 8px; border-radius: 4px; border: 1px solid var(--neutral-stroke-rest);">
        <p>Selected size:</p>
    </div>
</div>

```razor
@inject DataSource Data

<h4>Select the best song from the list or type your own</h4>
<p>
    Selected hit: @hit
</p>
<FluentCombobox Placeholder="Make a selection..." Label="Best song" Autofocus="true" Items="@Data.Hits" @bind-Value="@hit" Height="200px" Immediate ImmediateDelay="100" />

<h4>Pre-selected option</h4>
<FluentCombobox AriaLabel="Pre-selected option" Items="@Data.Names" @bind-Value="@name" Height="200px" />
<p>
    Selected name: @name
</p>

<h4>With Placeholder</h4>
<FluentCombobox Placeholder="Please select a size" Items="@Data.Sizes" @bind-Value="@size" Height="200px" />
<p>
    Selected size: @size
</p>

@code {
    string? hit = "";
    string? name = "Nur Sari";
    string? size = "";
}
```

### From a list of `Option<T>` items

<div style="display: flex; flex-direction: column; gap: 2rem;">
    <div>
        <h4>From list of Option&lt;string&gt; items</h4>
        <p>Second item in the list is initially selected through the <code>OptionSelected</code> parameter.</p>
        <input type="text" value="Two" style="width: 100%; padding: 5px 8px; border-radius: 4px; border: 1px solid var(--neutral-stroke-rest);">
        <p>Selected Value: Two<br>Selected Item (strongly typed):<br>Value: 2 (Type: System.String)<br>Text: Two</p>
    </div>
    <div>
        <h4>From list of Option&lt;int&gt; items</h4>
        <p>First item in the list is disabled through the <code>OptionDisabled</code> parameter.</p>
        <input type="text" style="width: 100%; padding: 5px 8px; border-radius: 4px; border: 1px solid var(--neutral-stroke-rest);">
        <p>Selected Value:<br>Selected Item (strongly typed):<br>Value: (Type:)<br>Text:</p>
    </div>
</div>

```razor
<h4>From list of Option&lt;string&gt; items</h4>
<p>Second item in the list is initially selected through the <code>OptionSelected</code> (Func delegate) parameter.</p>

<FluentCombobox Items=@stringOptions
                OptionText="@(i => i.Text)" 
                OptionValue="@(i => i.Value)" 
                OptionSelected="@(i => i.Selected)"
                @bind-SelectedOption="@selectedStringOption"
                @bind-Value="@stringValue" />
<p>
    Selected Value: @stringValue<br />
    Selected Item (strongly typed): <br />
    Value: @selectedStringOption?.Value (Type: @(selectedStringOption?.GetType())) <br />
    Text: @selectedStringOption?.Text
</p>

<h4>From list of Option&lt;int&gt; items</h4>
<p>First item in the list is disabled through the <code>OptionDisabled</code> (Func delegate) parameter.</p>
<p><em>Note that none of the options is initially highlighted or selected.</em></p>

<FluentCombobox Items=@intOptions 
                TOption="Option<int>"
                OptionText="@(i => i.Text)"
                OptionValue="@(i => i.Value.ToString())"
                OptionDisabled="@(i => i.Disabled)"
                @bind-SelectedOption="@selectedIntOption"
                @bind-Value="@intValue" />
<p>
    Selected Value: @intValue<br />
    Selected Item (strongly typed): <br />
    Value: @selectedIntOption?.Value (Type: @(selectedIntOption?.Value.GetType())) <br />
    Text: @selectedIntOption?.Text
</p>

@code {
    string? stringValue;
    Option<string> selectedStringOption = default!;
    string? intValue;
    Option<int>? selectedIntOption;

    List<Option<string>> stringOptions = new()
        {
            { new Option<string> { Value = "1", Text = "One" } },
            { new Option<string> { Value = "2", Text = "Two", Selected = true} },
            { new Option<string> { Value = "3", Text = "Three" } }
        };

    List<Option<int>> intOptions = new()
        {
            { new Option<int> { Value = 1, Text = "1", Disabled = true } },
            { new Option<int> { Value = 2, Text = "2" } },
            { new Option<int> { Value = 3, Text = "3" } }
        };
}
```

### Appearance example

<div style="background-color: var(--neutral-fill-input-rest); padding: 8px; border-radius: 4px; display: inline-block;">
    <input type="text" value="Help!" style="background: none; border: none; width: 100%;">
</div>
<p>Selected Value: Help!</p>

```razor
@inject DataSource Data
<h4>Filled</h4>
<FluentCombobox Id="combobox" 
                Appearance="Appearance.Filled"                
                TOption="string"
                Items="@Data.Hits"
                @bind-Value="@selectedValue" />

<p>Selected Value: @selectedValue</p>

@code {
    string? selectedValue = "Help!";
}
```

### Option template

<input type="text" style="width: 100%; padding: 5px 8px; border-radius: 4px; border: 1px solid var(--neutral-stroke-rest);">
<p>Selected option: <br> Selected value: </p>

```razor
@inject DataSource Data

<FluentCombobox Items="@Data.People"
                OptionValue="@(i => i.PersonId.ToString())"
                OptionText="@(i => $"{i.FirstName} ({i.LastName})")"
                @bind-Value="@value"
                @bind-SelectedOption=@Person>
    <OptionTemplate>
        <FluentIcon Value="@(new Icons.Regular.Size16.Person())" Slot="end" OnClick="@(() => DemoLogger.WriteLine($"Icon for {@context.LastName} selected"))" />
        @context.FirstName (@context.LastName)
    </OptionTemplate>
</FluentCombobox>
<p>
    Selected option: @Person <br />
    Selected value: @value
</p>

@code {
    public Person Person { get; set; } = default!;
    public string? value;
}
```

## Documentation

### FluentCombobox<TOption> Class

#### Parameters

| Parameter | Type | Default | Description |
| --- | --- | --- | --- |
| **Appearance** | `Appearance?` | | Gets or sets the visual appearance. |
| **Autocomplete** | `ComboboxAutocomplete?` | | Gets or sets a value indicating whether the element autocompletes. |
| **Items** | `IEnumerable<TOption>?` | | The source of all items to display. |
| **Label** | `string?` | | The text label for the input. |
| **Multiple** | `bool` | `False` | If true, the user can select multiple elements. ⚠️ Only for `FluentSelect` and `FluentListbox`. |
| **Open** | `bool?` | | Gets or sets the open attribute. |
| **OptionDisabled** | `Func<TOption, bool>?` | | A function to determine if an option is disabled. |
| **OptionSelected** | `Func<TOption, bool>?` | | A function to determine if an option is initially selected. |
| **OptionTemplate** | `RenderFragment<TOption>?` | | A template for rendering items in the dropdown. |
| **OptionText** | `Func<TOption, string>?` | | A function to determine the text to display for each option. |
| **OptionValue** | `Func<TOption, string>?` | | A function to determine the value to return for the selected item. |
| **Placeholder** | `string?` | | The short hint displayed in the input before the user enters a value. |
| **Position** | `SelectPosition?` | `Below` | Gets or sets the placement for the listbox when the combobox is open. |
| **SelectedOption** | `TOption?` | | The selected item when `Multiple` is false. |
| **Value** | `string?` | | Gets or sets the value of the input. This should be used with two-way binding. |
| **Width** | `string?` | | Gets or sets the width of the component. |

#### EventCallbacks

| EventCallback | Type | Description |
| --- | --- | --- |
| **SelectedOptionChanged** | `EventCallback<TOption>` | Called whenever the selection changes (when `Multiple` is false). |
| **ValueChanged** | `EventCallback<string>` | Gets or sets a callback that updates the bound value. |

### Placeholders and autofill

The `Placeholder` parameter is used to set the placeholder text for the input field. The placeholder value affects the autofill suggestion feature in browsers. To prevent autofill suggestions, avoid using common placeholder values like "name", "email", "address", etc. If you need to use these values, disable autofill in your browser settings.