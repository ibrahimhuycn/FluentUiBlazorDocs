# Select

An implementation of an HTML select element web-component.

`<FluentSelect>` wraps the `<fluent-select>` element, a web component implementation of a select leveraging the Fluent UI design system.

> **Note:** When `multiple=true` the select list is always shown expanded.

## Examples

### Default

<label>Select a person</label>
<div style="position: relative; width: 200px;">
    <input type="text" placeholder="Make a selection..." readonly style="width: 100%; padding: 5px 8px; border-radius: 4px; border: 1px solid var(--neutral-stroke-rest); cursor: pointer;">
    <!-- Dropdown arrow would be here -->
</div>
<p>Selected value: <br> Selected person (strongly typed):</p>

```razor
@inject DataSource Data
<FluentSelect TOption="Person"
              Label="Select a person"
              Items="@Data.People.WithVeryLongName()"
              Id="people-listbox"
              Width="200px"
              Height="250px"
              Placeholder="Make a selection..."
              OptionValue="@(p => p.PersonId.ToString())"
              OptionText="@(p => p.LastName + ", " + p.FirstName)"
              @bind-Value="@SelectedValue"
              @bind-SelectedOption="@SelectedPerson" />

<p>
    Selected value: @SelectedValue <br />
    Selected person (strongly typed): @SelectedPerson?.ToString()
</p>

@code
{
    Person? SelectedPerson;
    string? SelectedValue;
}
```

### From a list of `Option<T>` items

<h4>From a List of Option&lt;string&gt; items</h4>
<p>Second item in the list is initially selected through the <code>OptionSelected</code> (Func delegate) parameter.</p>
<!-- Placeholder for FluentSelect -->
<p>Selected Value: 8</p>

<h4>From a List of Option&lt;int&gt; items</h4>
<p>First item in the list is disabled through the <code>OptionDisabled</code> (Func delegate) parameter.</p>
<!-- Placeholder for FluentSelect -->
<p>Selected Value:<br>Selected Item (strongly typed):<br>Value: (Type:)<br>Text:</p>

<h4>From a list of Option&lt;string&gt; items where multiple can be selected</h4>
<p>Items 2, 5 and 8 are initially selected through the <code>OptionSelected</code> parameter.</p>
<p>Items with a value higher than 6 are disabled through the <code>OptionDisabled</code> parameter.</p>
<div style="height: 300px; border: 1px solid var(--neutral-stroke-rest); overflow-y: auto;">
    <!-- Placeholder for multiple select list -->
</div>
<p>Selected strings:</p>

```razor
<h4>From a List of Option&lt;string&gt; items</h4>
<p>Second item in the list is initially selected through the <code>OptionSelected</code> (Func delegate) parameter.</p>

<FluentSelect Items=@stringOptions1
               OptionText="@(i => i.Text)"
               OptionValue="@(i => i.Value)"
               OptionSelected="@(i => i.Selected)"
               @bind-Value="@stringValue" />
<p>
    Selected Value: @stringValue<br />
</p>

<h4>From a List of Option&lt;int&gt; items</h4>
<p>First item in the list is disabled through the <code>OptionDisabled</code> (Func delegate) parameter.</p>
<p><em>Note that the second option in the list is automatically highlighted but it has <strong>NOT</strong> been selected. It's just the first item in the list available for selection</em></p>
<FluentSelect Items=@intOptions
              TOption="Option<int>"
              OptionText="@(i => i.Text)"
              OptionValue="@(i => i.Value.ToString())"
              OptionDisabled="@(i => i.Disabled)"
@bind-SelectedOption="@selectedIntOption"
@bind-Value="@intValue" />
<p>
    Selected Value: @intValue<br />
    Selected Item (strongly typed): <br />
    Value: @selectedIntOption?.Value (Type: @(selectedIntOption?.Value.GetType())) <br />
    Text: @selectedIntOption?.Text
</p>

<h4>From a list of Option&lt;string&gt; items where multiple can be selected</h4>
<p>Items 2, 5 and 8 are initially selected through the <code>OptionSelected</code> (Func delegate) parameter.</p>
<p>Items with a value higher than 6 are disabled through the <code>OptionDisabled</code> (Func delegate) parameter.</p>
<p><em>Note that Item 8 is selected but also disabled and can therefore <strong>NOT</strong> be changed.</em></p>
<div style="display: block; height: 300px;">
    <FluentSelect Items=@stringOptions2
                  TOption="Option<string>"
                  Multiple=true
                  OptionText="@(i => i.Text)"
                  OptionValue="@(i => i.Value)"
                  OptionSelected="@(i => i.Selected)"
                  OptionDisabled="@(i => int.Parse(i.Value!) > 6)"
                  @bind-SelectedOptions="@selectedStrings" />
</div>
<p>
    Selected strings: @(selectedStrings != null ? string.Join(',', selectedStrings.Select(o => o.Value)) : "")<br />
</p>

@code {
    string? stringValue;
    string? intValue;
    Option<int>? selectedIntOption;
    IEnumerable<Option<string>>? selectedStrings;

    static List<Option<string>> stringOptions1 = new()
    {
        { new Option<string> { Value = "9", Text = "Nine", Icon = (new Icons.Regular.Size24.AppsList(), Color.Neutral, "start" ) } },
        { new Option<string> { Value = "8", Text = "Eight", Selected = true } },
        { new Option<string> { Value = "7", Text = "Seven" } },
        // ... more options
    };

    static List<Option<string>> stringOptions2 = new()
    {
        { new Option<string> { Value = "1", Text = "One" } },
        { new Option<string> { Value = "2", Text = "Two", Selected = true } },
        // ... more options
    };

    List<Option<int>> intOptions = new()
    {
        { new Option<int> { Value = 1, Text = "1", Disabled = true, Icon = (new Icons.Regular.Size24.NumberCircle1(), Color.Neutral, "start" ) } },
        { new Option<int> { Value = 2, Text = "2", Icon = (new Icons.Regular.Size24.NumberCircle2(), Color.Neutral, "end" ) } },
        { new Option<int> { Value = 3, Text = "3", Icon = (new Icons.Regular.Size24.NumberCircle3(), Color.Neutral, "start" ) } }
    };
}
```

### Appearances

<h4>Filled</h4>
<div style="background-color: var(--neutral-fill-input-rest); border-radius: 4px; padding: 1px;">
    <!-- Placeholder for filled FluentSelect -->
</div>

<h4>Stealth</h4>
<div style="background-color: var(--neutral-fill-stealth-rest); border-radius: 4px; padding: 1px;">
    <!-- Placeholder for stealth FluentSelect -->
</div>
<p>Selected Value: Help!</p>

```razor
@inject DataSource Data

<h4>Filled</h4>
<FluentSelect Appearance="Appearance.Filled"                
              TOption="string"
              Items="@Data.Hits"
              @bind-Value="@selectedValue" />

<h4>Stealth</h4>
<FluentSelect Appearance="Appearance.Stealth"
              TOption="string"
              Items="@Data.Hits"
              @bind-Value="@selectedValue" />

<p>Selected Value: @selectedValue</p>

@code {
    string? selectedValue = "Help!";
}
```

### Multiple items

When the parameter `Multiple` is set to `true`, the select list is always shown expanded. The current underlying web component does not support a dropdown.

<div style="height: 300px; border: 1px solid var(--neutral-stroke-rest); overflow-y: auto;">
    <!-- Placeholder for multiple select list -->
</div>
<p>Selected value: <br><em>Reflects the value of the first selected option</em><br></p>
<p>Selected options: <br><em>Strongly typed enumeration of the selected options...</em></p>

```razor
@inject DataSource Data

<div style="display: block; height: 300px;">
<FluentSelect TOption="Person"
              Label="Select people:"
              Items="@Data.People"
              Id="people-listbox2"
              Multiple="true"
              OptionValue="@(p => p.PersonId.ToString())"
              OptionText="@(p => p.LastName + ", " + p.FirstName)"
              @bind-Value="@SelectedValue"
              @bind-SelectedOptions="@SelectedOptions" />
</div>

<p>
    Selected value: @SelectedValue <br />
    <em>Reflects the value of the first selected option</em><br />
</p>
<p>
    Selected options: @(String.Join(", ", SelectedOptions!.Select(i => i.LastName)))<br />
    <em>Strongly typed enumeration of the selected options</em>. In this case a concatenated string of the last names of the selected options.
</p>

@code
{
    IEnumerable<Person>? SelectedOptions;
    string? SelectedValue;

    protected override void OnInitialized()
    {
        SelectedOptions = Data.People.Skip(2).Take(2);
        SelectedValue = SelectedOptions.First().PersonId.ToString();
    }
}```

## Documentation

### FluentSelect<TOption> Class

#### Parameters

| Parameter | Type | Default | Description |
| --- | --- | --- | --- |
| **Appearance** | `Appearance?` | | Gets or sets the visual appearance. |
| **Items** | `IEnumerable<TOption>?` | | The source of all items to display. |
| **Label** | `string?` | | The text label for the input. |
| **Multiple** | `bool` | `False` | If true, the user can select multiple elements. |
| **OptionDisabled** | `Func<TOption, bool>?` | | A function to determine if an option is disabled. |
| **OptionSelected** | `Func<TOption, bool>?` | | A function to determine if an option is initially selected. |
| **OptionTemplate** | `RenderFragment<TOption>?` | | A template for rendering items in the list. |
| **OptionText** | `Func<TOption, string>?` | | A function to determine the text to display for each option. |
| **OptionValue** | `Func<TOption, string>?` | | A function to determine the value to return for the selected item. |
| **Placeholder** | `string?` | | The short hint displayed in the input before the user enters a value. |
| **Position** | `SelectPosition?` | | Reflects the placement for the listbox when the select is open. |
| **SelectedOption** | `TOption?` | | The selected item when `Multiple` is false. |
| **SelectedOptions** | `IEnumerable<TOption>?` | | The selected items when `Multiple` is true. |
| **Value** | `string?` | | The value of the input. Use with `@bind-Value`. |
| **Width** | `string?` | | The width of the component. |

#### EventCallbacks

| EventCallback | Type | Description |
| --- | --- | --- |
| **SelectedOptionChanged** | `EventCallback<TOption>` | Called when the selection changes (when `Multiple` is false). |
| **SelectedOptionsChanged**| `EventCallback<IEnumerable<TOption>>` | Called when the selection changes (when `Multiple` is true). ⚠️ Not triggered when using manual options. |
| **ValueChanged** | `EventCallback<string>` | A callback that updates the bound value. |