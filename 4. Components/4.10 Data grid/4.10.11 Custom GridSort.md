# SortBy Rank

Here is an example that demonstrates some of the sort order specifications that are available in the `GridSort` class.

<div style="display: flex; flex-direction: column; gap: 1rem;">
    <!-- Placeholder for the first DataGrid -->
    <table style="width: 100%; border-collapse: collapse;">
        <thead><tr><th>Rank</th><th>Group</th></tr></thead>
        <tbody>
            <tr><td>2</td><td>B</td></tr>
            <tr><td>1</td><td>A</td></tr>
            <tr><td>4</td><td>B</td></tr>
            <tr><td>3</td><td>A</td></tr>
        </tbody>
    </table>
    
    <p>Keep numbers always sorted ascending inside the group when sorting by group</p>
    <!-- Placeholder for the second DataGrid -->
    <table style="width: 100%; border-collapse: collapse;">
        <thead><tr><th>Rank</th><th>Group</th></tr></thead>
        <tbody>
            <tr><td>1</td><td>A</td></tr>
            <tr><td>3</td><td>A</td></tr>
            <tr><td>2</td><td>B</td></tr>
            <tr><td>4</td><td>B</td></tr>
        </tbody>
    </table>
</div>

```razor
<FluentDataGrid Items="@_gridData" ResizableColumns=true GridTemplateColumns="0.5fr 0.5fr">
    <PropertyColumn Sortable="true" Property="x => x.Number" Title="Rank" />
    <TemplateColumn Sortable="true" SortBy="groupRank" Title="Group">
        @context.Group
    </TemplateColumn>
</FluentDataGrid>

<p>Keep numbers always sorted ascending inside the group when sorting by group</p>
<FluentDataGrid Items="@_gridData" ResizableColumns=true GridTemplateColumns="0.5fr 0.5fr">
    <PropertyColumn Sortable="true" Property="x => x.Number" Title="Rank" />
    <PropertyColumn Property="x => x.Group" SortBy="groupRankNumberAlwaysAscending" Title="Group" />
</FluentDataGrid>

@code {
    GridSort<GridRow> groupRank = GridSort<GridRow>
            .ByAscending(x => x.Group)
            .ThenAscending(x => x.Number);

    GridSort<GridRow> groupRankNumberAlwaysAscending = GridSort<GridRow>
        .ByAscending(x => x.Group)
        .ThenAlwaysAscending(x => x.Number);

    private static readonly IQueryable<GridRow> _gridData = new GridRow[] {
        new(2, "B"),
        new(1, "A"),
        new(4, "B"),
        new(3, "A")
    }.AsQueryable();

    public class GridRow(int number, string group)
    {
        public int Number { get; } = number;
        public string Group { get; } = group;
    }
}
```

## Column Key Sort

In some instances, your dataset may not have a property on the class that can be used for sorting. In this instance, you can supply a `ColumnKeyGridSort` that allows you to specify the name of your column and supply the logic for sorting.

<!-- Placeholder for DataGrid -->
<table style="width: 100%; border-collapse: collapse;">
    <thead><tr><th>First Name</th><th>Last Name</th></tr></thead>
    <tbody>
        <tr><td>Tom</td><td>Cruise</td></tr>
        <tr><td>Dolly</td><td>Parton</td></tr>
        <tr><td>Nicole</td><td>Kidman</td></tr>
        <tr><td>James</td><td>Bond</td></tr>
    </tbody>
</table>

```razor
<FluentDataGrid Items="@_gridData" ResizableColumns=true GridTemplateColumns="0.5fr 0.5fr">
    <TemplateColumn Sortable="true" Title="First Name" SortBy="_firstNameSort">
        @context.Properties["firstname"]
    </TemplateColumn>
    <TemplateColumn Sortable="true" Title="Last Name" SortBy="_lastNameSort">
        @context.Properties["lastname"]
    </templateColumn>
</FluentDataGrid>

@code {
    private ColumnKeyGridSort<GridRow> _firstNameSort = new ColumnKeyGridSort<GridRow>(
        "firstname",
        (queryable, sortAscending) =>
        {
            if (sortAscending)
                return queryable.OrderBy(x => x.Properties["firstname"]);
            else
                return queryable.OrderByDescending(x => x.Properties["firstname"]);
        }
    );

    private ColumnKeyGridSort<GridRow> _lastNameSort = new ColumnKeyGridSort<GridRow>(
        "lastname",
        (queryable, sortAscending) =>
        {
            if (sortAscending)
                return queryable.OrderBy(x => x.Properties["lastname"]);
            else
                return queryable.OrderByDescending(x => x.Properties["lastname"]);
        }
    );

    private static readonly IQueryable<GridRow> _gridData = new GridRow[] {
        new(new Dictionary<string, string>{ { "firstname", "Tom" }, { "lastname", "Cruise" } }),
        new(new Dictionary<string, string>{ { "firstname", "Dolly" }, { "lastname", "Parton" } }),
        new(new Dictionary<string, string>{ { "firstname", "Nicole" }, { "lastname", "Kidmon" } }),
        new(new Dictionary<string, string>{ { "firstname", "James" }, { "lastname", "Bond" } }),
    }.AsQueryable();

    public record GridRow(Dictionary<string, string> Properties);
}
```

## Documentation

### GridSort<TGridItem> Class

#### Methods

*   **`ByAscending<U>(Expression<Func<TGridItem, U>> expression)`**: Produces a `GridSort` instance that sorts ascending according to the specified expression.
*   **`ByDescending<U>(Expression<Func<TGridItem, U>> expression)`**: Produces a `GridSort` instance that sorts descending according to the specified expression.
*   **`ThenAscending<U>(Expression<Func<TGridItem, U>> expression)`**: Appends a further ascending sorting rule.
*   **`ThenDescending<U>(Expression<Func<TGridItem, U>> expression)`**: Appends a further descending sorting rule.
*   **`ThenAlwaysAscending<U>(Expression<Func<TGridItem, U>> expression)`**: Appends a further ascending sorting rule that is always applied.
*   **`ThenAlwaysDescending<U>(Expression<Func<TGridItem, U>> expression)`**: Appends a further descending sorting rule that is always applied.