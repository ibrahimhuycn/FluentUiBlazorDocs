# Menu

As defined by the W3C:

> A menu is a widget that offers a list of choices to the user, such as a set of actions or functions. Menus behave like native operating system menus... A menu is usually opened... by activating a menu button, choosing an item in a menu that opens a sub menu, or by invoking a command... When a user activates a choice in a menu, the menu usually closes unless the choice opened a submenu.

While any DOM content is permissible as a child of the menu, only `<FluentMenuItem>`s and slotted content with a role of `menuitem`, `menuitemcheckbox`, or `menuitemradio` will receive keyboard support.

`<FluentMenu>` wraps the `<fluent-menu>` element, a web component implementation of a menu leveraging the Fluent UI design system.

## FluentMenuProvider

With version 4.9.4 of the library, we introduced the `FluentMenuProvider` component. The `Menu` component has been updated to use this provider. The `<FluentMenuProvider />` needs to be placed at the bottom of your HTML page (just like the other `...Provider` components). It renders all menus and menu items at the provider location, allowing menus to appear on top of other components.

You can disable this feature by setting `UseMenuService="false"` on your `FluentMenu` component. In this case, the menu will be rendered at the location it is placed at in the page.

## Example

### Default

<p>Click this button to open a Menu.</p>
<button id="btnOpen1" style="background-color: var(--accent-fill-rest); color: white; border: none; padding: 8px 12px; border-radius: 4px;">Open menu</button>
<!-- Menu would appear here -->
<p></p>

```razor
<p>Click this button to open a Menu.</p>
<FluentButton id="btnOpen1" Appearance="Appearance.Accent" @onclick="@(() => open = !open)">
    Open menu
</FluentButton>

<FluentMenu Anchor="btnOpen1" @bind-Open="open" @onmenuchange=OnMenuChange VerticalThreshold="170">
    <FluentMenuItem OnClick="@((e) => DemoLogger.WriteLine("Item 1 Clicked"))">
        Menu item 1
    </FluentMenuItem>
    <FluentMenuItem OnClick="@((e) => DemoLogger.WriteLine("Item 2 Clicked"))"
                   Checked="true">
        Menu item 2 Checked
    </FluentMenuItem>
    <FluentMenuItem OnClick="@((e) => DemoLogger.WriteLine("Item 3 Clicked"))"
                   Disabled="true">
        Menu item 3 Disabled
    </FluentMenuItem>
    <FluentMenuItem OnClick="@((e) => DemoLogger.WriteLine("Item 4 Clicked"))">
        <span slot="start"><FluentIcon Value="@(new Icons.Regular.Size24.ClipboardPaste())" Color="Color.Neutral" Slot="start" /></span>
        Menu item 4 with Icon
    </FluentMenuItem>
</FluentMenu>

<p>@status</p>

@code {
    bool open = false;
    private string status = "";

    private void OnMenuChange(MenuChangeEventArgs args)
    {
        if (args?.Value is not null)
            status = $"Item \"{args.Value}\" clicked";
    }
}
```

### Simple context menu

<div id="myId4" style="padding: 1rem; border: 1px dashed var(--neutral-stroke-rest); text-align: center;">
    Right-click on this text <br>
    to open a Context Menu.
</div>
<p></p>

```razor
<div id="myId4" class="demopanel">
    Right-click on this text <br />
    to open a Context Menu.
</div>

<FluentMenu Anchor="myId4" Trigger="MouseButton.Right" Anchored="false" @onmenuchange=OnMenuChange>
    <FluentMenuItem Label="Item 1" />
    <FluentMenuItem Label="Item 2">
        <MenuItems>
            <FluentMenuItem Label="Item 2.1">
                <MenuItems>
                    <FluentMenuItem Label="Item 2.1.1" />
                    <FluentMenuItem Label="Item 2.1.2" />
                </MenuItems>
            </FluentMenuItem>
            <FluentMenuItem Label="Item 2.2" />
        </MenuItems>
    </FluentMenuItem>
    <FluentMenuItem Label="Item 3" />
</FluentMenu>
```

### With radio buttons and checkboxes

<div style="border: 1px solid var(--neutral-stroke-rest); padding: 4px; width: 200px;">
    <div style="padding: 8px;">Menu item 1</div>
    <div style="padding: 8px;">Menu item 2</div>
    <hr>
    <div style="padding: 8px;"><input type="checkbox"> Checkbox 1</div>
    <div style="padding: 8px;"><svg width="16" height="16" fill="currentColor"><path d="M...Z"/></svg> Checkbox 2</div>
    <hr>
    <div style="padding: 8px;"><input type="radio" name="radio-group"> Radio 1.1</div>
    <div style="padding: 8px;"><input type="radio" name="radio-group"> Radio 1.2</div>
</div>

```razor
<FluentMenu Open="true" Anchored="false">
    <FluentMenuItem>Menu item 1</FluentMenuItem>
    <FluentMenuItem>Menu item 2</FluentMenuItem>
    <FluentDivider></FluentDivider>
    <FluentMenuItem Role="MenuItemRole.MenuItemCheckbox">Checkbox 1</FluentMenuItem>
    <FluentMenuItem Role="MenuItemRole.MenuItemCheckbox">
        Checkbox 2
        <FluentIcon Value="@(new Icons.Regular.Size16.Globe())" Color="@Color.Neutral" Slot="checkbox-indicator" />
    </FluentMenuItem>
    <FluentDivider></FluentDivider>
    <FluentMenuItem Role="MenuItemRole.MenuItemRadio">Radio 1.1</FluentMenuItem>
    <FluentMenuItem Role="MenuItemRole.MenuItemRadio">Radio 1.2</FluentMenuItem>
</FluentMenu>
```

## Documentation

### FluentMenuItem Class

#### Parameters
| Parameter | Type | Default | Description |
|---|---|---|---|
| **Checked** | `bool` | `False` | Whether the element is checked. |
| **ChildContent** | `RenderFragment?` | | The content to be rendered inside the component. |
| **Disabled** | `bool` | `False` | Whether the element is disabled. |
| **KeepOpen** | `bool` | `False` | If true, the `FluentMenu` remains open after an action. |
| **Label** | `string?` | | The menu item label. |
| **MenuItems** | `RenderFragment?` | | The list of sub-menu items. |
| **Role** | `MenuItemRole?` | `MenuItem` | The role of the element (`MenuItem`, `MenuItemCheckbox`, `MenuItemRadio`). |

#### EventCallbacks
| EventCallback | Type | Description |
|---|---|---|
| **CheckedChanged** | `EventCallback<bool>` | Raised for checkbox and radio menu items when their state changes. |
| **OnClick** | `EventCallback<MouseEventArgs>` | Raised when the user clicks on this item. |

### FluentMenu Class

#### Parameters
| Parameter | Type | Default | Description |
|---|---|---|---|
| **Anchor** | `string` | | The ID of the component that the menu is anchored to. |
| **Anchored** | `bool` | `True` | If true, the menu is drawn below the anchor; otherwise, it uses mouse coordinates. |
| **ChildContent** | `RenderFragment?` | | The content to be rendered inside the component. |
| **Open** | `bool` | `False` | The open/closed status of the menu. |
| **Trigger** | `MouseButton` | `None` | The mouse button that automatically triggers the menu. |
| **UseMenuService** | `bool` | `True` | If true, uses the `IMenuService` to create the menu. |
| **Width** | `string?` | | The width of this menu. |

#### EventCallbacks
| EventCallback | Type | Description |
|---|---|---|
| **OnCheckedChanged** | `EventCallback<FluentMenuItem>` | Raised when a `FluentMenuItem`'s `Checked` property changes. |
| **OpenChanged** | `EventCallback<bool>` | Raised when the `Open` property changes. |