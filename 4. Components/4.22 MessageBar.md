# MessageBar

> **IMPORTANT!!**
> MessageBars are rendered by the `<FluentMessageBarProvider />`. This component needs to be added to the layout of your application/site.
>
> For the MessageBars to work properly, the `<FluentMessageBarProvider/>` needs interactivity! If you are using "per page" interactivity, make sure to add a `@rendermode` to either the provider itself or the component the provider is placed in.

```html
<main>
    <div class="content">
        <article id="article">
            <FluentMessageBarProvider Section="MESSAGES_TOP"/>
            @Body
        </article>
    </div>
</main>
```

## Sections

You can use multiple message bar providers in a single page/app. An area to display messages in is called a `Section`. You can specify in which `Section` you want your message to appear through the `MessageOptions`.

## Clear message bars on navigation

By default, message bars will not be removed when navigating to another page. This can be changed by setting the `ClearAfterNavigation` parameter to `true` on a `FluentMessageBarProvider`.

## Examples

### Message Service

<div style="display: flex; gap: 1rem; flex-wrap: wrap;">
    <button>Add on top</button>
    <button>Add in Notification Center</button>
    <button>Add in a dialog</button>
    <button>Add non-dismissible on top</button>
    <button>Clear all alerts</button>
</div>

```razor
@inject IMessageService MessageService
@inject IDialogService DialogService

<FluentButton OnClick="@AddInTopBar" Appearance="Appearance.Accent">Add on top</FluentButton>
<FluentButton OnClick="@AddInNotificationCenter" Appearance="Appearance.Accent">Add in Notification Center</FluentButton>
<FluentButton OnClick="@AddInDialog" Appearance="Appearance.Accent">Add in a dialog</FluentButton>
<FluentButton OnClick="@AddNonDismissibleMessage" Appearance="Appearance.Accent">Add non-dismissible on top</FluentButton>
<FluentButton Appearance="Appearance.Neutral" OnClick="@((e) => MessageService.Clear())">Clear all alerts</FluentButton>

@code
{
    int counter = 0;

    async Task AddInTopBar()
    {
        var message = $"Simple message #{counter++}";
        var type = Enum.GetValues<MessageIntent>()[counter % 4];
        await MessageService.ShowMessageBarAsync(message, type, App.MESSAGES_TOP);
    }
    // ... other methods
}
```

### Simple messages

<div style="display: flex; flex-direction: column; gap: 8px;">
    <div style="padding: 12px; border-radius: 4px; background-color: var(--neutral-layer-2);">
        <strong>Descriptive title</strong>
        <p>Message providing information to the user with actionable insights.</p>
    </div>
    <div style="padding: 12px; border-radius: 4px; background-color: lightgreen;">
        <strong>Descriptive title</strong>
        <p>Message providing information to the user with actionable insights.</p>
    </div>
    <div style="padding: 12px; border-radius: 4px; background-color: lightyellow;">
        <strong>Descriptive title</strong>
        <p>Message providing information to the user with actionable insights.</p>
    </div>
    <div style="padding: 12px; border-radius: 4px; background-color: lightpink;">
        <strong>Descriptive title</strong>
        <p>Message providing information to the user with actionable insights.</p>
    </div>
</div>

```razor
<FluentStack Orientation="@Orientation.Vertical" VerticalGap="8">
    <FluentMessageBar Title="Descriptive title">
        Message providing information to the user with actionable insights.
    </FluentMessageBar>
    <FluentMessageBar Title="Descriptive title" Intent="@MessageIntent.Success">
        Message providing information to the user with actionable insights.
    </FluentMessageBar>
    <FluentMessageBar Title="Descriptive title" Intent="@MessageIntent.Warning">
        Message providing information to the user with actionable insights.
    </FluentMessageBar>
    <FluentMessageBar Title="Descriptive title" Intent="@MessageIntent.Error">
        Message providing information to the user with actionable insights.
    </FluentMessageBar>
</FluentStack>
```

### Simple notification

<div style="width: 500px; border: 1px solid var(--accent-fill-rest); padding: 12px; border-radius: 4px; background-color: lightgreen;">
    <div style="display: flex; justify-content: space-between;">
        <strong>Delete operation</strong>
        <span>1 hour ago</span>
    </div>
    <p>Successfully deleted <i>'XYZ-blazor.pdf'</i></p>
</div>

```razor
<FluentMessageBar Title="Delete operation"
                  Timestamp="@(DateTime.Now.AddHours(-1))"
                  Style="width: 500px; border: 1px solid var(--accent-fill-rest)"
                  Intent="MessageIntent.Success"
                  Type="@MessageType.Notification">
    Successfully deleted <i>'XYZ-blazor.pdf'</i>
</FluentMessageBar>
```

## Documentation

### FluentMessageBarProvider Class

#### Parameters
| Parameter | Type | Default | Description |
|---|---|---|---|
| **ClearAfterNavigation** | `bool` | `False` | Clears all messages when the user navigates to a new page. |
| **MaxMessageCount** | `int?` | `5` | Maximum number of messages displayed. |
| **NewestOnTop** | `bool` | `True` | Displays the newest messages on top. |
| **Section** | `string?` | | Displays only messages for this section. |
| **Type** | `MessageType`| `MessageBar` | Displays messages as a single line (`MessageBar`) or as a card (`Notification`). |

### FluentMessageBar Class

#### Parameters
| Parameter | Type | Default | Description |
|---|---|---|---|
| **AllowDismiss** | `bool` | `True` | The ability to dismiss the notification. |
| **ChildContent** | `RenderFragment?` | | The message to be shown when not using the `MessageService`. |
| **Intent** | `MessageIntent?` | `Info` | The intent of the message bar (e.g., `Info`, `Success`, `Warning`, `Error`). |
| **Timestamp** | `DateTime?` | `Now` | The time the message was created. Only used for `Notification` type. |
| **Title** | `string?` | | The title of the message. |
| **Type** | `MessageType` | `MessageBar`| The type of message bar (`MessageBar` or `Notification`). |

### MessageService Class

#### Methods
*   **`Clear(string section)`**: Clears all messages from a specific section.
*   **`Count(string section)`**: Counts the number of messages in a section.
*   **`ShowMessageBarAsync(Action<MessageOptions> options)`**: Shows a message based on the provided options.

### MessageOptions Class

#### Properties
| Property | Type | Default | Description |
|---|---|---|---|
| **Title** | `string?` | | The title of the message. |
| **Body** | `string?` | | The message to be shown after the title. |
| **Intent** | `MessageIntent?` | `Info` | The intent of the message bar. |
| **Timeout** | `int?` | `null` | The timeout in milliseconds after which the message is removed. |
| **Section** | `string?` | | The section the message belongs to. |