# Anchored region

An anchored region is a container component which enables authors to create layouts where the contents of the anchored region can be positioned relative to another "anchor" element. Additionally, the anchored region can react to the available space between the anchor and a parent "viewport" element such that the region is placed on the side of the anchor with the most available space, or even resize itself based on that space.

`<FluentAnchoredRegion>` wraps the `<fluent-anchored-region>` element, a web component implementation of an anchored region leveraging the Fluent UI design system.

## Examples

### Dynamic (default)

The anchored region (the yellow block) is anchored to the button. It will dynamically position itself based on the available space.

<div id="viewport-default" style="position:relative;height:400px;width:400px;background: var(--neutral-layer-4);overflow:auto; resize:both;">
    <button id="anchor-default" style="margin-left:100px;margin-top:100px">anchor</button>
    <div style="position: absolute; top: 124px; left: 100px; height: 100px; width: 100px; background: yellow;"></div>
</div>

```razor
<div id="viewport-default" style="position:relative;height:400px;width:400px;background: var(--neutral-layer-4);overflow:auto; resize:both;">
    <FluentButton Appearance=Appearance.Neutral id="anchor-default" style="margin-left:100px;margin-top:100px">anchor</FluentButton>
    <FluentAnchoredRegion Anchor="anchor-default" Viewport="viewport-default"
                          VerticalPositioningMode="AxisPositioningMode.Dynamic"
                          HorizontalPositioningMode="AxisPositioningMode.Dynamic"
                          AutoUpdateMode="AutoUpdateMode.Auto">
        <div style="height:100px;width:100px;background:var(--highlight-bg);" />
    </FluentAnchoredRegion>
</div>
```

### Locked to default

Each region is anchored to the button with a specific lock position.

<div id="viewport-locked" style="position:relative;height:400px;width:400px;background: var(--neutral-layer-4);overflow:auto; resize:both;">
    <div style="position: absolute; top: 174px; left: 184px; height:150px;width:150px;background:var(--neutral-layer-2);" />
    <div style="position: absolute; top: 50px; left: 184px; height:100px;width:100px;background:yellow;" />
    <div style="position: absolute; top: 50px; left: 0px; height:50px;width:50px;background:red;" />
    <button id="anchor-locked" style="margin-left:100px;margin-top:150px">anchor</button>
</div>

```razor
<div id="viewport-locked" style="position:relative;height:400px;width:400px;background: var(--neutral-layer-4);overflow:auto; resize:both;">
    <FluentAnchoredRegion Anchor="anchor-locked" Viewport="viewport-locked"
                          VerticalPositioningMode="AxisPositioningMode.Locktodefault"
                          VerticalDefaultPosition="VerticalPosition.Bottom"
                          HorizontalPositioningMode="AxisPositioningMode.Locktodefault"
                          HorizontalDefaultPosition="HorizontalPosition.Right">
        <div style="height:150px;width:150px;background:var(--neutral-layer-2);" />
    </FluentAnchoredRegion>
    <!-- ... more regions ... -->
    <FluentButton Appearance=Appearance.Neutral id="anchor-locked" style="margin-left:100px;margin-top:150px">anchor</FluentButton>
</div>
```

### Inset

<div id="viewport-inset" style="position:relative;height:400px;width:400px;background: var(--neutral-layer-4);overflow:auto;resize:both;">
    <button id="anchor-inset" style="margin-left:100px;margin-top:100px">anchor</button>
    <div style="position: absolute; top: 100px; left: 100px; height:100px;width:100px;background:yellow;opacity:.5" />
</div>

```razor
<div id="viewport-inset" style="position:relative;height:400px;width:400px;background: var(--neutral-layer-4);overflow:auto;resize:both;">
    <FluentButton Appearance=Appearance.Neutral id="anchor-inset" style="margin-left:100px;margin-top:100px">anchor</FluentButton>
    <FluentAnchoredRegion Anchor="anchor-inset" Viewport="viewport-inset"
                          VerticalPositioningMode="AxisPositioningMode.Dynamic"
                          VerticalInset="true"
                          HorizontalPositioningMode="AxisPositioningMode.Dynamic"
                          HorizontalInset="true">
        <div style="height:100px;width:100px;background:var(--highlight-bg);;opacity:.5" />
    </FluentAnchoredRegion>
</div>
```

## Documentation

### FluentAnchoredRegion Class

#### Parameters

| Parameter | Type | Default | Description |
| --- | --- | --- | --- |
| **Anchor** | `string?` | | The HTML ID of the anchor element this region is positioned relative to. |
| **AutoUpdateMode** | `AutoUpdateMode?` | `Anchor` | Defines what triggers the anchored region to re-evaluate its positioning. |
| **ChildContent** | `RenderFragment?` | | The content to be rendered inside the component. |
| **FixedPlacement** | `bool?` | | If true, the region uses `position: fixed`. Otherwise, it uses `position: absolute`. |
| **HorizontalDefaultPosition**| `HorizontalPosition?`| `Unset` | The default horizontal position of the region relative to the anchor. |
| **HorizontalInset** | `bool` | `False` | If true, the region overlaps the anchor on the horizontal axis. |
| **HorizontalPositioningMode**| `AxisPositioningMode?`| `Dynamic` | Sets the logic for horizontal placement (`Locktodefault`, `Dynamic`, `Uncontrolled`). |
| **HorizontalScaling** | `AxisScalingMode?` | `Content` | Defines how the width of the region is calculated. |
| **VerticalDefaultPosition**| `VerticalPosition?` | `Unset` | The default vertical position of the region relative to the anchor. |
| **VerticalInset** | `bool` | `False` | If true, the region overlaps the anchor on the vertical axis. |
| **VerticalPositioningMode**| `AxisPositioningMode?`| `Dynamic` | Sets the logic for vertical placement (`Locktodefault`, `Dynamic`, `Uncontrolled`). |
| **VerticalScaling** | `AxisScalingMode?` | `Content` | Defines how the height of the region is calculated. |
| **Viewport** | `string?` | | The HTML ID of the viewport element this region is positioned relative to. If unset, the parent element is used. |

#### Methods

| Method | Description |
| --- | --- |
| **FocusToNextElementAsync()** | Moves focus to the next element within this anchor region. |
| **FocusToOriginalElementAsync()** | Moves focus back to the initial element that triggered the anchor region. |